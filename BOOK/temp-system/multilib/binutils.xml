<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.4//EN"
  "http://www.oasis-open.org/docbook/xml/4.4/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  <!ENTITY % patches-entities SYSTEM "../../patches.ent">
  %general-entities;
  %patches-entities;
]>

<sect1 id="ch-temp-system-binutils" role="wrap">
  <?dbhtml filename="binutils.html"?>

  <title>Binutils-&binutils-version;</title>

  <indexterm zone="ch-temp-system-binutils">
    <primary sortas="a-Binutils">Binutils</primary>
    <secondary>temporary system</secondary>
  </indexterm>

  <sect2 role="package">
    <title/>

    <xi:include xmlns:xi="http://www.w3.org/2003/XInclude"
    href="../../final-system/common/binutils.xml"
    xpointer="xpointer(id('package-binutils')/para[1])"/>

    <segmentedlist>
      <segtitle>&buildtime;</segtitle>
      <segtitle>&diskspace;</segtitle>

      <seglistitem>
        <seg>Not checked yet</seg>
        <seg>Not checked yet</seg>
      </seglistitem>
    </segmentedlist>

    <xi:include xmlns:xi="http://www.w3.org/2003/XInclude"
    href="../../final-system/common/binutils.xml"
    xpointer="xpointer(id('package-binutils')/segmentedlist[2])"/>

  </sect2>

  <sect2 role="installation">
    <title>Installation of Binutils</title>

    <xi:include xmlns:xi="http://www.w3.org/2003/XInclude"
    href="../common/binutils.xml"
    xpointer="xpointer(//*[@role='installation']/para[1])"/>

    <xi:include xmlns:xi="http://www.w3.org/2003/XInclude"
    href="../../cross-tools/common/binutils.xml"
    xpointer="xpointer(//*[@role='installation']/para[1])"/>

    <xi:include xmlns:xi="http://www.w3.org/2003/XInclude"
    href="../../cross-tools/common/binutils.xml"
    xpointer="xpointer(//*[@role='installation']/screen[1])"/>

    <xi:include xmlns:xi="http://www.w3.org/2003/XInclude"
    href="../../cross-tools/mips64/binutils.xml"
    xpointer="xpointer(//*[@role='installation']/para[2])"/>

    <xi:include xmlns:xi="http://www.w3.org/2003/XInclude"
    href="../../cross-tools/mips64/binutils.xml"
    xpointer="xpointer(//*[@role='installation']/screen[2])"/>

    <xi:include xmlns:xi="http://www.w3.org/2003/XInclude"
    href="../../final-system/common/binutils.xml"
    xpointer="xpointer(id('install-binutils')/para[5])"/>

    <xi:include xmlns:xi="http://www.w3.org/2003/XInclude"
    href="../../final-system/common/binutils.xml"
    xpointer="xpointer(id('install-binutils')/screen[3])"/>

    <!-- To be moved to their proper file (or full removed) when decided
    how to manage SBUs

    <note>
      <para>In order for the SBU values listed in the rest of the book
      to be of any use, measure the time it takes to build this package from
      the configuration, up to and including the first install. To achieve
      this easily, wrap the four commands in a <command>time</command>
      command like this: <userinput>time { ./configure ... &amp;&amp; ...
      &amp;&amp; ... &amp;&amp; make install; }</userinput>.</para>
    </note>

    -->

    <para>Now prepare Binutils for compilation:</para>

<screen><userinput>CC="${CC} ${BUILD64}" \
     ../binutils-&binutils-version;/configure --prefix=/tools \
     --libdir=/tools/lib64 --with-lib-path=/tools/lib \
     --build=${LFS_HOST} --host=${LFS_TARGET} --target=${LFS_TARGET} \
     --disable-nls --enable-shared --enable-64-bit-bfd</userinput></screen>

    <variablelist>
      <title>The meaning of the new configure option:</title>

      <varlistentry>
        <term><parameter>--prefix=/tools</parameter></term>
        <listitem>
          <para>This tells the configure script to prepare to install the
          Binutils programs in the <filename class="directory">/tools</filename>
          directory.</para>
        </listitem>
      </varlistentry>

    </variablelist>

    <para>Continue with compiling the package:</para>

<screen><userinput>make configure-host
make headers -C bfd
make</userinput></screen>

    <para>Install the package:</para>

<screen><userinput>make install</userinput></screen>

    <para>Copy <filename class="headerfile">libiberty.h</filename> file to
    <filename class="directory">/tools/include</filename> directory:</para>

<screen><userinput>cp ../binutils-&binutils-version;/include/libiberty.h /tools/include</userinput></screen>

  </sect2>

  <sect2 role="content">
    <title/>

    <para>Details on this package are located in <xref
    linkend="contents-binutils" role="."/></para>

  </sect2>

</sect1>
