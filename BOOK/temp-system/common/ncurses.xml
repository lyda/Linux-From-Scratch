<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.4//EN"
  "http://www.oasis-open.org/docbook/xml/4.4/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  <!ENTITY % patches-entities SYSTEM "../../patches.ent">
  %general-entities;
  %patches-entities;
]>

<sect1 id="ch-temp-system-ncurses" role="wrap">
  <?dbhtml filename="ncurses.html"?>

  <title>Ncurses-&ncurses-version;</title>

  <indexterm zone="ch-temp-system-ncurses">
    <primary sortas="a-Ncurses">Ncurses</primary>
    <secondary>temporary system</secondary>
  </indexterm>

  <sect2 role="package">
    <title/>

    <xi:include xmlns:xi="http://www.w3.org/2003/XInclude"
    href="../../final-system/common/ncurses.xml"
    xpointer="xpointer(id('package-ncurses')/para[1])"/>

    <segmentedlist>
      <segtitle>&buildtime;</segtitle>
      <segtitle>&diskspace;</segtitle>

      <seglistitem>
        <seg>Not checked yet</seg>
        <seg>Not checked yet</seg>
      </seglistitem>
    </segmentedlist>

    <xi:include xmlns:xi="http://www.w3.org/2003/XInclude"
    href="../../final-system/common/ncurses.xml"
    xpointer="xpointer(id('package-ncurses')/segmentedlist[2])"/>

  </sect2>

  <sect2 role="installation">
    <title>Installation of Ncurses</title>

    <para>When cross-compiling, Ncurses doesn't always properly create
    the file <filename>ncurses/comp_captab.c</filename> which results
    in build failures. Fix this issue by updating Ncurses with a rollup
    patch released on 2005/03/19:</para>

<screen><userinput>bzcat ../&ncurses-update-patch; > update.sh
sh update.sh</userinput></screen>

    <para>Prepare Ncurses for compilation:</para>

<screen><userinput>./configure --prefix=/tools --with-shared \
   --host=${LFS_TARGET} --without-debug --without-ada \
   --enable-overwrite --with-build-cc=gcc</userinput></screen>

    <variablelist>
      <title>The meaning of the configure options:</title>

      <varlistentry>
        <term><parameter>--without-ada</parameter></term>
        <listitem>
          <para>This tells Ncurses not to build its Ada bindings, even
          if an Ada compiler is installed on the host. This needs to be done
          because once we enter the chroot environment, Ada will no longer be
          available.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><parameter>--enable-overwrite</parameter></term>
        <listitem>
          <para>This tells Ncurses to install its header files into
          <filename class="directory">/tools/include</filename>, instead of
          <filename class="directory">/tools/include/ncurses</filename>, to
          ensure that other packages can find the Ncurses headers
          successfully.</para>
        </listitem>
      </varlistentry>

    </variablelist>

    <para>Compile the package:</para>

<screen><userinput>make</userinput></screen>

    <para>Install the package:</para>

<screen><userinput>make install</userinput></screen>

  </sect2>

  <sect2 role="content">
    <title/>

    <para>Details on this package are located in <xref
    linkend="contents-ncurses" role="."/></para>

  </sect2>

</sect1>
